language: java

addons:
  sonarcloud:
    organization: trellis-ldp

services:
  - cassandra
  
matrix:
  fast_finish: true

  include:
    # JDK 8
    - jdk: oraclejdk8

    # JDK 10
    - jdk: openjdk10

    # JDK 11
    - jdk: oraclejdk11

  allow_failures:
    - jdk: oraclejdk11
    - jdk: openjdk10

# resolve dependencies
install: mvn dependency:go-offline
# turn off Cassandra Maven plugin to use Travis' service instead
script: mvn -P-self-cassandra -Dcassandra.contactHost=localhost -Dcassandra.nativeTransportPort=9042 verify

